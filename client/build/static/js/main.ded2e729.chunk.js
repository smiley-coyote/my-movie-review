(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,a){e.exports="data:image/png;base64,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"},175:function(e,a,t){e.exports=t(435)},180:function(e,a,t){},182:function(e,a,t){},202:function(e,a,t){},204:function(e,a,t){},206:function(e,a,t){},208:function(e,a,t){},250:function(e,a,t){},373:function(e,a,t){},375:function(e,a,t){},377:function(e,a,t){},380:function(e,a,t){},382:function(e,a,t){},384:function(e,a,t){},386:function(e,a,t){},388:function(e,a,t){},419:function(e,a,t){},421:function(e,a,t){},423:function(e,a,t){},425:function(e,a,t){},427:function(e,a,t){},429:function(e,a,t){},431:function(e,a,t){},433:function(e,a,t){},435:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(13),s=t.n(l),c=(t(180),t(28)),i=t(14),m=t(15),o=t(17),u=t(16),d=t(18),p=t(442),h=t(443),E=t(438),f=t(441),v=(t(182),t(11)),g=t.n(v),b="http://www.omdbapi.com/",w="&apikey=65d98e81",y={byTitle:function(e){var a=e;return a=(a=a.split(" ")).join("+"),g.a.get(b+"?t="+a+"&y=&plot=short"+w)},byId:function(e){var a=e;return g.a.get(b+"?i="+a+"&y=&plot=short"+w)},searchByTitle:function(e){return g.a.get(b+"?s="+e+"&y&type=movie"+w)},singleByTitle:function(e){return g.a.get(b+"?t="+e+"&y=&plot=short"+w)},postResults:function(e){return g.a.put("/api/user/results/",e)},findUser:function(e){return g.a.get("/api/user/"+e)},findAll:function(){return g.a.get("/api/user/")},submitRating:function(e){return g.a.post("/api/rating",e)},findRatingUser:function(e){return g.a.get("/api/rating/"+e)},getRatings:function(e){return g.a.get("/api/rating/"+e)},addCritic:function(e){return g.a.post("/api/critic",e)},submitReview:function(e){return g.a.put("/api/rating/writeup",e)},uploadImage:function(e){return g.a.put("/api/user",e)},submitTopFive:function(e){return g.a.put("/api/user/topfive",e)}},N=(t(202),function(e){var a=e.size,t=e.children;return r.a.createElement("div",{id:"col",className:a.split(" ").map(function(e){return"col-"+e}).join(" ")},t)}),A=function(e){var a=e.fluid,t=e.children;return r.a.createElement("div",{className:"container".concat(a?"-fluid":"")},t)},I=function(e){var a=e.fluid,t=e.children;return r.a.createElement("div",{className:"row".concat(a?"-fluid":"")},t)},C=(t(204),function(e){return r.a.createElement("div",{className:"sidebar panel"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},r.a.createElement("strong",null,e.title))),r.a.createElement("div",{className:"panel-body"},e.children))}),R=(t(206),t(440)),k=t(436),S=(t(208),function(e){return r.a.createElement(R.a,{bsStyle:"primary",title:e.title},r.a.createElement(k.a,{onClick:e.handleSelection},e.selection))}),D=function(e){return r.a.createElement("div",{className:"mainbody panel"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement(S,{handleSelection:e.handleSelection,selection:e.selection,title:e.title})),r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"body-contents"},e.children)))},T=(t(250),t(20)),M=t(437),j=function(e){return r.a.createElement("div",null,void 0!==e.topusers?r.a.createElement("div",null,e.topusers.map(function(a){return r.a.createElement("div",{className:"top-matches",key:a.id},r.a.createElement("fieldset",{onClick:e.addCritic,name:a.user,id:a.id},r.a.createElement("div",null,r.a.createElement("div",{className:"float-left"},r.a.createElement(M.a,{to:"/user/"+a.id},r.a.createElement(T.Image,{cloudName:"dmyiazu6p",publicId:a.image},r.a.createElement(T.Transformation,{width:"100",height:"100",gravity:"faces",crop:"fill"}))),r.a.createElement("p",null,a.user),r.a.createElement("p",null,a.percentage,"% match")),r.a.createElement("div",{className:"content"},void 0!==a.ratings[0]?r.a.createElement("div",{className:"latest-rating"},r.a.createElement("p",{className:"heading"},"Latest Review"),r.a.createElement("p",null,a.ratings[0].title),1===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==a.ratings[0].review?r.a.createElement("p",null,a.ratings[0].review):r.a.createElement("p",null,"No written review")):r.a.createElement("p",null,"No ratings for this user"))),r.a.createElement("div",{className:"float-right"},r.a.createElement("button",null,"Add New Critic"))),r.a.createElement(M.a,{to:"/user/"+a.id},"visit profile"),r.a.createElement("hr",null))})):r.a.createElement("div",null,r.a.createElement("p",null,"data not available")))},F=(t(373),function(e){return r.a.createElement("div",null,e.ratings.map(function(e){return r.a.createElement("div",{className:"top-matches my-critics-page",key:e.date},r.a.createElement("div",{className:"float-left my-critics"},r.a.createElement(M.a,{to:"/movie/?q="+e.title.split(" ").join("+")},r.a.createElement("img",{src:e.poster,alt:e.title}))),r.a.createElement("div",{className:"content"},r.a.createElement("h3",null,e.title),r.a.createElement("div",{className:"latest-rating"},r.a.createElement("p",{className:"heading"},"Rating:"),1===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==e.review?r.a.createElement("p",null,e.review):r.a.createElement("p",null,"No written review"))),r.a.createElement(M.a,{to:"/user/"+e.id},"visit profile"),r.a.createElement("hr",null))}))}),O=t(171),U=t.n(O),P=[{title:"",id:"tt0499549",viewers:0,score:0,percentage:0,metacritic:0,reviewed:!1},{title:"",id:"tt3104988",viewers:0,score:0,percentage:0,metacritic:0,reviewed:!1},{title:"",id:"tt4263482",viewers:0,score:0,percentage:0,metacritic:0,reviewed:!1},{title:"",id:"tt0499549",viewers:0,score:0,percentage:0,metacritic:0,reviewed:!1},{title:"",id:"tt6781982",viewers:0,score:0,percentage:0,metacritic:0,reviewed:!1}],x=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={currentuser:{},mycritics:[],usercurrentcritics:[],allusers:[],userscores:[],topusers:[],topmovies:[],currentratings:[],allRatings:[],topuserratings:[],button:!1,title:"Top Matches",selection:"My Critics",criticratings:[]},t.setMovieState=function(){t.setState({topmovies:P})},t.runGetMovieTitles=function(){for(var e=function(e){y.byId(P[e].id).then(function(a){!1===P[e].reviewed&&"N/A"!==a.data.Metascore&&(P[e].percentage="*"+a.data.Metascore);var t=a.data.Title,n=a.data.Title;t=(t=t.split(" ")).join("+"),P[e].title=n,P[e].movie=t}).then(function(){return t.setMovieState()})},a=0;a<P.length;a++)e(a)},t.getTopUserRatings=function(){var e=t.state.topusers;console.log(e);for(var a=0;a<e.length;a++)if(null!==e[a].ratings){for(var n=e[a].ratings,r=0;r<n.length;r++)for(var l=n[r].imdbID,s=n[r].rating,c=0;c<P.length;c++)if(P[c].id===l){var i=P[c].score,m=P[c].viewers,o=P[c].percentage;P[c].reviewed=!0,s>2?(o=(i+=1)/(m+=1)*100,o=Math.round(o),P[c].score=i,P[c].viewers=m,P[c].percentage=o):(o=i/(m+=1)*100,o=Math.round(o),P[c].score=i,P[c].viewers=m,P[c].percentage=o)}t.setState({topmovies:P})}},t.sortTopUserRatings=function(){var e=t.state.userscores;console.log(e);for(var a=0;a<e.length;a++)void 0!==e[a].ratings&&e[a].ratings.sort(function(e,a){var t=new Date(e.date);return new Date(a.date)-t});t.setState({userscores:e}),t.getTopUserRatings()},t.runTopMatchResults=function(){var e=t.state.userscores,a=[];e.sort(function(e,a){return a.score-e.score});for(var n=0;n<5;n++)a.push(e[n]);console.log(a),t.setState({topusers:a,userscores:e}),t.sortTopUserRatings()},t.runTopMatchFinder=function(){for(var e=t.state.userscores,a=t.state.currentuser.survey,n=0,r=0;r<e.length;r++)for(var l=0,s=e[r],c=0;c<s.survey.length;c++){var i=s.survey.length;a[c]>2&&s.survey[c]>2?(n=(l+=1)/i*100,n=Math.round(n),e[r].score=l,e[r].percentage=n):a[c]<3&&s.survey[c]<3?(n=(l+=1)/i*100,n=Math.round(n),e[r].score=l,e[r].percentage=n):(n=(l+=0)/i*100,n=Math.round(n),e[r].score=l,e[r].percentage=n)}t.setState({userscores:e}),t.runTopMatchResults()},t.runSurveyResults=function(){var e=t.state.allusers,a=[];console.log(e);for(var n=0;n<e.length;n++)e[n]._id!==t.props.auth.userId&&a.push({user:e[n].name,id:e[n]._id,survey:e[n].survey,score:0,percentage:0,ratings:e[n].ratings,image:e[n].image});t.setState({userscores:a}),t.runTopMatchFinder()},t.filterCritics=function(){var e=t.state.usercurrentcritics,a=t.state.allusers.filter(function(a){return e.every(function(e){return e.criticId!==a._id})});t.setState({allusers:a}),t.runSurveyResults()},t.runFindAll=function(){y.findAll().then(function(e){return t.setState({allusers:e.data})}).then(function(){return t.filterCritics()})},t.sortCriticRatings=function(e){var a=e;a.sort(function(e,a){return e.date.localeCompare(a.date)}),console.log(a),t.setState({topuserratings:a})},t.getUserCritics=function(e){var a=e,n=[];console.log(a);for(var r=function(e){y.findUser(a[e].criticId).then(function(t){var r=t.data.name,l=t.data.image;console.log(t.data),a[e].image=t.data.image,a[e].ratings=t.data.ratings;for(var s=0;s<t.data.ratings.length;s++)n.push({image:l,username:r,imdbID:t.data.ratings[s].imdbID,poster:t.data.ratings[s].poster,rating:t.data.ratings[s].rating,title:t.data.ratings[s].title,date:t.data.ratings[s].date,review:t.data.ratings[s].review})})},l=0;l<a.length;l++)r(l);console.log(a),console.log(n),t.setState({mycritics:a}),t.sortCriticRatings(n)},t.loadUser=function(){y.findUser(t.props.auth.userId).then(function(e){var a=e.data.critics;console.log(a),t.getUserCritics(a),t.setState({currentuser:e.data,usercurrentcritics:a})}).then(function(){t.runFindAll()})},t.buttonClick=function(){t.state.button?t.setState({button:!1}):t.setState({button:!0})},t.addCritic=function(e){e.preventDefault();var a=e.currentTarget.id,n=t.props.auth.userId,r=e.currentTarget.name;console.log(a),console.log(n),console.log(r),y.addCritic({username:r,userId:n,criticId:a}).then(function(e){console.log("added!"),t.loadUser(),t.runGetMovieTitles()})},t.handleSelection=function(e){e.preventDefault(),"Top Matches"===t.state.title&&t.setState({title:"My Critics",selection:"Top Matches"}),"My Critics"===t.state.title&&t.setState({title:"Top Matches",selection:"My Critics"})},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadUser(),this.runGetMovieTitles()}},{key:"render",value:function(){return r.a.createElement(A,null,r.a.createElement(I,null,r.a.createElement(N,{size:"md-3"},r.a.createElement(C,{title:"Top Movies"},r.a.createElement("ol",null,r.a.createElement("div",{className:"top-movies"},this.state.topmovies.map(function(e){return r.a.createElement(M.a,{to:"/movie/?q="+e.movie},r.a.createElement("li",{key:e.id},e.percentage,"% ",e.title))}),r.a.createElement("p",{className:"asterisk"},"*Metacritic score")),r.a.createElement(M.a,{to:"/movie"},"view more")))),r.a.createElement(N,{size:"md-6"},r.a.createElement(D,{selection:this.state.selection,title:this.state.title,handleSelection:this.handleSelection},"Top Matches"===this.state.title?r.a.createElement(j,{topusers:this.state.topusers,addCritic:this.addCritic,placeholder:U.a}):r.a.createElement(F,{ratings:this.state.topuserratings,critics:this.state.mycritics}))),r.a.createElement(N,{size:"md-3"},r.a.createElement(C,{title:"Welcome, "+this.state.currentuser.name+"!"},r.a.createElement(M.a,{to:"/profile"},r.a.createElement(T.Image,{cloudName:"dmyiazu6p",publicId:this.state.currentuser.image},r.a.createElement(T.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"}))),r.a.createElement("div",{className:"text-center"},r.a.createElement(M.a,{to:"/profile"},"view profile"))))))}}]),a}(n.Component),z=function(e){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleFormControlInput1"},e.children)))},B=(t(375),t(377),["Pulp Fiction","Fifty Shades of Grey","Lost In Translation","2001: A Space Odyssey","The Witch","Jurassic World","La La Land","Mad Max: Fury Road","Cabin In The Woods","Twilight","Transformers","Interstellar","Gravity","The Tree of Life","Monty Python and the Holy Grail"]),Y=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={question:"",number:-1,selectValue:"1",image:"",answers:[],id:"",currentuser:{},redirect:!1},t.handleInputChange=function(e){t.setState({selectValue:e.target.value})},t.nextQuestion=function(){var e=t.state.number;y.byTitle(B[e]).then(function(a){console.log(a.data);var n=a.data.Poster;t.setState({question:B[e],image:n,id:a.data.imdbID})})},t.endQuestions=function(){var e=t.state.answers;console.log(e),y.postResults({id:t.props.auth.userId,survey:e}).then(function(e){t.setState({redirect:!0})})},t.handleFormSubmit=function(e){if(e.preventDefault(),t.state.number<14){var a=t.state.selectValue,n=t.state.answers.map(function(e){return e});n.push(a),t.setState({number:t.state.number+=1,answers:n}),t.nextQuestion()}else t.endQuestions()},t.firstQuestion=function(){y.byTitle("Avatar").then(function(e){var a=e.data.Poster,n=e.data.imdbID;t.setState({question:"Avatar",image:a,id:n})})},t.loadUser=function(){y.findUser(t.props.auth.userId).then(function(e){console.log(e.data),t.setState({currentuser:e.data})}),t.firstQuestion()},t.handleRatingInputChange=function(e){e.preventDefault();var a=e.currentTarget.name,n=e.target.htmlFor,r=e.currentTarget.id,l=e.currentTarget.getAttribute("image"),s=t.props.auth.userId;if(y.submitRating({_userId:s,imdbID:a,rating:n,title:r,poster:l}).then(function(e){return console.log(e.data)}),t.setState({title:a,rating:n}),t.state.number<14){var c=n,i=t.state.answers.map(function(e){return e});i.push(c),t.setState({number:t.state.number+=1,answers:i}),t.nextQuestion()}else t.endQuestions()},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(f.a,{to:"/home"}):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(z,null,r.a.createElement("img",{src:this.state.image,alt:this.state.question}),r.a.createElement("br",null),r.a.createElement("h1",null,this.state.question)),r.a.createElement("fieldset",{className:"rating",image:this.state.image,id:this.state.question,name:this.state.id,onClick:this.handleRatingInputChange},r.a.createElement("h3",null,"Please rate:"),r.a.createElement("input",{type:"radio",id:"star4",name:"rating",value:"4"}),r.a.createElement("label",{htmlFor:"4"}),r.a.createElement("input",{type:"radio",id:"star3",name:"rating",value:"3"}),r.a.createElement("label",{htmlFor:"3"}),r.a.createElement("input",{type:"radio",id:"star2",name:"rating",value:"2"}),r.a.createElement("label",{htmlFor:"2"}),r.a.createElement("input",{type:"radio",id:"star1",name:"rating",value:"1"}),r.a.createElement("label",{htmlFor:"1"}))))}}]),a}(n.Component),L=(t(380),t(444)),J=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={search:""},t.handleInputSubmit=function(e){e.preventDefault();var a=t.state.search;a=(a=a.split(" ")).join("+"),t.props.history.push("/search/"+a)},t.handleInputChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(c.a)({},n,r))},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("a",{className:"navbar-brand",href:"/home"},"MMRD")),r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"dropdown"},r.a.createElement("a",{className:"dropdown-toggle","data-toggle":"dropdown",href:"/home"},"Menu",r.a.createElement("span",{className:"caret"})),r.a.createElement("ul",{className:"dropdown-menu"},r.a.createElement("li",null,r.a.createElement(M.a,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(M.a,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(M.a,{to:"/movie"},"Browse Movies"))))),r.a.createElement("ul",{className:"nav navbar-nav navbar-right"},r.a.createElement("li",null,r.a.createElement("a",{onClick:this.props.handleLogout,href:"/"},r.a.createElement("span",{className:"glyphicon glyphicon-log-out"})," Logout"))),r.a.createElement("form",{className:"navbar-form navbar-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"search",onChange:this.handleInputChange,value:this.state.search,className:"form-control",placeholder:"Search Movie"})),r.a.createElement("button",{type:"submit",onClick:this.handleInputSubmit,className:"btn btn-default"},"Submit"))))}}]),a}(n.Component),G=Object(L.a)(J),V=t(24),Z=(t(382),function(e){return r.a.createElement(A,null,r.a.createElement(I,null,r.a.createElement("div",{className:"movie-display panel"},r.a.createElement("div",{className:"movie-display-body panel-body"},r.a.createElement(N,{size:"md-4"},r.a.createElement("img",{alt:e.data.Title,src:e.data.Poster}),r.a.createElement("span",null)),r.a.createElement(N,{size:"md-8"},r.a.createElement("div",{className:"black-border"},r.a.createElement("h2",null,e.data.Title),r.a.createElement("div",{className:"plot"},e.data.Plot),r.a.createElement("div",{className:"inline"},r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Rated:")," ",e.data.Rated),r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Genre:")," ",e.data.Genre),r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Released:")," ",e.data.Released),r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Runtime:")," ",e.data.Runtime)),r.a.createElement("p",null,r.a.createElement("span",{className:"your-movie-rating"},"Your Rating: "),1===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("span",null,"unavailable"),r.a.createElement("span",{className:"float-right"},"MyCritic Score: ",e.data.criticRating,"%")))),r.a.createElement("div",{className:"my-review"},e.children),r.a.createElement("div",{className:"scroll critic-review-body"},r.a.createElement("h3",null,"My Critic Reviews"),e.critics.map(function(e){return r.a.createElement("div",{className:"critic-review-content"},r.a.createElement("p",null,e.username),1===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):r.a.createElement("p",null,"rating not available"),void 0!==e.review?r.a.createElement("p",null,e.review):r.a.createElement("p",null,"No review submitted"))}))))))}),W=(t(384),function(e){return r.a.createElement("div",{className:"container"},e.children)}),q=(t(386),function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("br",null),r.a.createElement("div",{className:"panel"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},r.a.createElement("strong",null,"Movie Results"))),r.a.createElement("div",{className:"panel-body",id:"well-section"},r.a.createElement("ul",{className:"list-group search-results"},e.children)))))}),Q=(t(388),t(129)),H=t(439),X=[],K=[],_={},$=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(o.a)(this,Object(u.a)(a).call(this,e,t))).handleReviewSubmit=function(e){e.preventDefault();var a=n.props.auth.userId;y.submitReview({_userId:a,review:n.state.writeup,imdbID:n.state.id}).then(function(e){n.setState({show:!1}),n.loadUser(),n.runSingleMovie()})},n.handleRatingInputChange=function(e){e.preventDefault();var a=e.currentTarget.name,t=e.target.htmlFor,r=e.currentTarget.getAttribute("image"),l=n.props.auth.userId,s=e.currentTarget.getAttribute("title");y.submitRating({imdbID:a,rating:t,poster:r,_userId:l,title:s}).then(function(e){n.loadUser(),n.runSingleMovie()})},n.handleInputChange=function(e){e.preventDefault();var a=e.target,t=a.name,r=a.value;n.setState(Object(c.a)({},t,r))},n.getCriticScore=function(){var e=n.state.currentcriticratings;console.log(e);var a=0,t=0,r=0;if(e.length>0){for(var l=0;l<e.length;l++)e[l]>2?(r=(a=a+=1)/(t+=1)*100,r=Math.round(r),_.criticRating=r):(r=a/(t+=1)*100,r=Math.round(r),_.criticRating=r);console.log(r+"="+a+"/"+t),n.setState({movie:_}),n.setState({display:"search"}),n.setState({display:"movie"})}},n.getUserRating=function(){var e=n.state.usercritics,a=[];console.log(e);for(var t=[],r=0;r<e.length;r++)for(var l=e[r].ratings,s=0;s<l.length;s++)_.imdbID===l[s].imdbID&&(a.push({username:e[r].name,rating:l[s].rating,review:l[s].review}),t.push(l[s].rating));console.log(e),n.setState({currentcriticreviews:a}),console.log(a),n.setState({currentcriticratings:t}),n.getCriticScore()},n.readUrl=function(){var e=window.location.search,a=(e=e.split("="))[0];e=e[1],"?q"===a?(n.setState({display:"movie"}),n.runSingleMovie(e)):"?search"===a&&(n.setState({display:"search"}),n.runSearchMovie(e))},n.runSearchMovie=function(e){y.searchByTitle(e).then(function(e){var a=e.data.Search,t=n.state.currentuser.ratings;console.log(t);for(var r=0;r<a.length;r++){var l=a[r].Title;l=(l=l.split(" ")).join("+"),a[r].plusTitle=l;for(var s=0;s<t.length;s++)a[r].imdbID===t[s].imdbID&&(a[r].yourRating=t[s].rating,void 0!==t[s].review&&(a[r].yourReview=t[s].review))}n.setState({results:a})})},n.runSingleMovie=function(e){y.singleByTitle(e).then(function(e){_=e.data;n.state.currentuser.ratings;for(var a=n.state.currentuser.ratings,t=0;t<a.length;t++)a[t].imdbID===_.imdbID&&(_.userRating=a[t].rating,_.userReview=a[t].review);console.log(_),n.setState({movie:_}),n.getUserRating()})},n.loadUserCritics=function(){var e=n.state.currentuser.critics;console.log(e);for(var a=0;a<e.length;a++)y.findUser(e[a].criticId).then(function(e){console.log(e.data),K.push(e.data)});n.setState({usercritics:K})},n.loadUser=function(){y.findUser(n.props.auth.userId).then(function(e){console.log(e.data),X=e.data.critics,console.log(X),e.data.ratings,n.setState({currentuser:e.data}),n.loadUserCritics()})},n.handleShow=n.handleShow.bind(Object(V.a)(Object(V.a)(n))),n.handleClose=n.handleClose.bind(Object(V.a)(Object(V.a)(n))),n.state={display:"",movie:{},currentuser:{},allusers:[],navsearch:"",results:[],rating:0,ratings:[],show:!1,id:"",title:"",poster:"",writeup:"",userratings:[],usercritics:[],currentcriticratings:[],currentcriticreviews:[]},n}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(e,a,t){this.setState({id:e,title:a,poster:t}),this.setState({show:!0})}},{key:"componentDidMount",value:function(){this.loadUser(),this.readUrl()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,"movie"===this.state.display?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(Z,{data:this.state.movie,critics:this.state.currentcriticreviews},void 0===this.state.movie.userRating?r.a.createElement("div",{className:"star-rating"},r.a.createElement("fieldset",{title:this.state.movie.Title,image:this.state.movie.Poster,className:"rating",name:this.state.movie.imdbID,onClick:this.handleRatingInputChange},r.a.createElement("h3",null,"Please rate:"),r.a.createElement("input",{type:"radio",id:"star4",name:"rating",value:"4"}),r.a.createElement("label",{htmlFor:"4"}),r.a.createElement("input",{type:"radio",id:"star3",name:"rating",value:"3"}),r.a.createElement("label",{htmlFor:"3"}),r.a.createElement("input",{type:"radio",id:"star2",name:"rating",value:"2"}),r.a.createElement("label",{htmlFor:"2"}),r.a.createElement("input",{type:"radio",id:"star1",name:"rating",value:"1"}),r.a.createElement("label",{htmlFor:"1"}))):r.a.createElement("span",null),void 0!==this.state.movie.userReview?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Review:"),r.a.createElement("br",null),this.state.movie.userReview):void 0!==this.state.movie.userRating?r.a.createElement(Q.a,{id:this.state.movie.imdbID,name:this.state.movie.Title,bsStyle:"primary",bsSize:"large",onClick:function(){return e.handleShow(e.state.movie.imdbID,e.state.movie.Title,e.state.movie.Poster)}},"Add A Review"):r.a.createElement("p",null,"Rate Movie Before Writing Review"),r.a.createElement(H.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,"Review ",this.state.title)),r.a.createElement(H.a.Body,null,r.a.createElement("img",{src:this.state.poster,alt:this.state.title}),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"comment"},"Review:"),r.a.createElement("textarea",{name:"writeup",value:this.state.writeup,onChange:this.handleInputChange,className:"form-control",rows:"5",id:"comment"}))),r.a.createElement(H.a.Footer,null,r.a.createElement(Q.a,{onClick:this.handleReviewSubmit},"Submit Review"),r.a.createElement(Q.a,{onClick:this.handleClose},"Close"))))))):"search"===this.state.display?r.a.createElement(W,null,r.a.createElement(q,null,this.state.results.map(function(a){return r.a.createElement(I,null,r.a.createElement("div",{className:"search-body",key:a.imdbID},r.a.createElement(N,{size:"md-4"},r.a.createElement("div",{className:"search-float-left"},r.a.createElement(M.a,{to:"/movie/?q="+a.plusTitle},r.a.createElement("img",{src:a.Poster,alt:a.Title})),r.a.createElement(M.a,{to:"/movie/?q="+a.plusTitle},"view movie info"))),r.a.createElement(N,{size:"md-8"},r.a.createElement("div",{className:"search-content"},r.a.createElement("h2",null,a.Title," (",a.Year,")"),r.a.createElement("p",null,a.Plot)),r.a.createElement(I,null,r.a.createElement(N,{size:"md-4"},r.a.createElement("div",{className:"your-rating"},void 0===a.yourRating?r.a.createElement(I,null,r.a.createElement(N,{size:"md-12"},r.a.createElement("div",{className:"star-rating"},r.a.createElement("fieldset",{title:a.Title,image:a.Poster,className:"rating",name:a.imdbID,onClick:e.handleRatingInputChange},r.a.createElement("h3",null,"Please rate:"),r.a.createElement("input",{type:"radio",id:"star4",name:"rating",value:"4"}),r.a.createElement("label",{htmlFor:"4"}),r.a.createElement("input",{type:"radio",id:"star3",name:"rating",value:"3"}),r.a.createElement("label",{htmlFor:"3"}),r.a.createElement("input",{type:"radio",id:"star2",name:"rating",value:"2"}),r.a.createElement("label",{htmlFor:"2"}),r.a.createElement("input",{type:"radio",id:"star1",name:"rating",value:"1"}),r.a.createElement("label",{htmlFor:"1"}))))):1===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):2===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):3===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"})):4===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"})):r.a.createElement("p",null,"Your Rating is not available at this time"),void 0!==a.yourReview?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Review:"),r.a.createElement("br",null),a.yourReview):void 0!==a.yourRating?r.a.createElement(Q.a,{id:a.imdbID,name:a.Title,bsStyle:"primary",bsSize:"large",onClick:function(){return e.handleShow(a.imdbID,a.Title,a.Poster)}},"Add A Review"):r.a.createElement("p",null,"Rate Movie Before Writing Review"))))),r.a.createElement(H.a,{show:e.state.show,onHide:e.handleClose},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,"Review ",e.state.title)),r.a.createElement(H.a.Body,null,r.a.createElement("img",{src:e.state.poster,alt:e.state.title}),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"comment"},"Review:"),r.a.createElement("textarea",{name:"writeup",value:e.state.writeup,onChange:e.handleInputChange,className:"form-control",rows:"5",id:"comment"}))),r.a.createElement(H.a.Footer,null,r.a.createElement(Q.a,{onClick:e.handleReviewSubmit},"Submit Review"),r.a.createElement(Q.a,{onClick:e.handleClose},"Close")))))}))):r.a.createElement("h1",null,"Error"))}}]),a}(n.Component),ee=t(109),ae=t(108),te=t.n(ae),ne=(t(419),function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).handleUpload=function(e){e.preventDefault();var a=t.state.userimage,n=t.props.auth.userId;y.uploadImage({image:a,id:n}),t.setState({show:!1}),t.loadUser()},t.handleClose=function(e){e.preventDefault(),t.setState({show:!1})},t.handleShow=function(e){e.preventDefault(),t.setState({show:!0})},t.runUserRatings=function(){var e=t.state.currentuser.ratings;e.sort(function(e,a){var t=new Date(e.date);return new Date(a.date)-t}),t.setState({userratings:e})},t.loadUser=function(){console.log(t.props.auth.userId),y.findUser(t.props.auth.userId).then(function(e){t.setState({currentuser:e.data}),t.runUserRatings()})},t.handleInputChange=function(e){var a=e.target.value,n=e.target.name;t.setState(Object(c.a)({},n,a))},t.handleFormSubmit=function(e){e.preventDefault();var a=[t.state.movieOne,t.state.movieTwo,t.state.movieThree,t.state.movieFour,t.state.movieFive],n={userId:t.props.auth.userId,topfive:a};y.submitTopFive(n).then(function(e){console.log(e.data+" Success!")}),t.setState({showedit:!1}),t.loadUser()},t.handleUpdateMovies=function(e){e.preventDefault(),t.setState({showedit:!0})},t.state={currentuser:{},topmovies:[],userratings:[],uploadedFile:null,uploadedFileCloudinaryUrl:"",userimage:"",modalDisplay:!1,show:!1,showedit:!1,movieOne:"",movieTwo:"",movieThree:"",movieFour:"",movieFive:""},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"onImageDrop",value:function(e){this.setState({uploadedFile:e[0]}),this.handleImageUpload(e[0])}},{key:"handleImageUpload",value:function(e){var a=this;te.a.post("https://api.cloudinary.com/v1_1/dmyiazu6p/image/upload").field("upload_preset","kmmnilon").field("file",e).end(function(e,t){if(e&&console.error(e),""!==t.body.secure_url){var n=t.body.secure_url.split("/")[7];a.setState({userimage:n})}})}},{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(A,null,r.a.createElement(I,null,r.a.createElement(N,{size:"md-3"},r.a.createElement(C,{title:"My Top Movies"},void 0!==this.state.currentuser.topmovies?this.state.showedit?r.a.createElement("div",{className:"text-align-center"},r.a.createElement("p",null,"Add top 5 movies")):r.a.createElement("ol",null,this.state.currentuser.topmovies.map(function(e){return r.a.createElement("li",{key:e},e)}),r.a.createElement("button",{onClick:this.handleUpdateMovies},"update")):r.a.createElement("span",null),!0===this.state.showedit?r.a.createElement("form",null,r.a.createElement("ol",null,r.a.createElement("form",{className:"form"},r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieOne,name:"movieOne",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieTwo,name:"movieTwo",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieThree,name:"movieThree",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieFour,name:"movieFour",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieFive,name:"movieFive",onChange:this.handleInputChange,type:"text"})),r.a.createElement("button",{onClick:this.handleFormSubmit},"Submit")))):r.a.createElement("span",null))),r.a.createElement(N,{size:"md-6"},r.a.createElement(D,null,this.state.userratings!==[]?r.a.createElement("div",null,this.state.userratings.map(function(a){return r.a.createElement("div",{className:"my-reviews",key:a.imdbID},r.a.createElement(M.a,{to:"/movie/?q="+a.title.split(" ").join("+")},r.a.createElement("img",{alt:a.title,src:a.poster})),r.a.createElement("div",{className:"reviews-title"},r.a.createElement("h3",null,a.title)),r.a.createElement("div",{className:"reviews-body"},r.a.createElement("div",{className:"border-box"},r.a.createElement("p",null,"My rating:"),1===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):2===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):3===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"})):4===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==a.review?r.a.createElement("p",null,a.review,r.a.createElement("br",null),"-",e.state.currentuser.name):r.a.createElement("p",null))))})):r.a.createElement("div",null,r.a.createElement("p",null,"No Ratings Available")))),r.a.createElement(N,{size:"md-3"},r.a.createElement(C,{title:"My Profile"},r.a.createElement(T.Image,{cloudName:"dmyiazu6p",publicId:this.state.currentuser.image},r.a.createElement(T.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"})),r.a.createElement("button",{onClick:this.handleShow},"Update Picture"))))),r.a.createElement(H.a,{show:this.state.show,onHide:this.handClose},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,"Upload New Profile Picture")),r.a.createElement(H.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"FileUpload"},r.a.createElement(ee.a,{onDrop:this.onImageDrop.bind(this),multiple:!1,accept:".png, .jpg"},r.a.createElement("div",null,"Drop an image or click to select a file to upload."))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(T.Image,{cloudName:"dmyiazu6p",publicId:this.state.currentuser.image},r.a.createElement(T.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"}))),""===this.state.uploadedFileCloudinaryUrl?null:r.a.createElement("div",null,r.a.createElement("p",null,this.state.uploadedFile.name))))),r.a.createElement(H.a.Footer,null,r.a.createElement(Q.a,{onClick:this.handleUpload},"Save Changes"),r.a.createElement(Q.a,{onClick:this.handleClose},"Cancel"))))}}]),a}(n.Component)),re=(t(421),t(423),[]),le=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(o.a)(this,Object(u.a)(a).call(this,e,t))).handleReviewSubmit=function(e){e.preventDefault();var a=n.props.auth.userId;y.submitReview({_userId:a,review:n.state.writeup,imdbID:n.state.id}).then(function(e){y.findUser(a).then(function(e){for(var a=e.data.ratings,t=n.state.results,r=0;r<t.length;r++)for(var l=0;l<a.length;l++)t[r].imdbID===a[l].imdbID&&(t[r].yourRating=a[l].rating,void 0!==a[l].review&&(t[r].yourReview=a[l].review));n.setState({results:t})}),n.setState({show:!1})})},n.handleRatingInputChange=function(e){e.preventDefault();var a=e.currentTarget.name,t=e.target.htmlFor,r=e.currentTarget.getAttribute("image"),l=n.props.auth.userId,s=e.currentTarget.getAttribute("title");y.submitRating({imdbID:a,rating:t,poster:r,_userId:l,title:s}).then(function(e){y.findUser(l).then(function(e){for(var a=e.data.ratings,t=n.state.results,r=0;r<t.length;r++)for(var l=0;l<a.length;l++)t[r].imdbID===a[l].imdbID&&(t[r].yourRating=a[l].rating);n.setState({results:t})})})},n.handleInputChange=function(e){e.preventDefault();var a=e.target,t=a.name,r=a.value;n.setState(Object(c.a)({},t,r))},n.runSearch=function(){var e=window.location.pathname;e=e.split("/")[2],console.log(e);var a=[],t=[];y.searchByTitle(e).then(function(e){a=e.data.Search,t=n.state.currentuser.ratings,console.log(t);for(var r=0;r<a.length;r++){var l=a[r].Title;l=(l=l.split(" ")).join("+"),a[r].plusTitle=l;for(var s=0;s<t.length;s++)a[r].imdbID===t[s].imdbID&&(a[r].yourRating=t[s].rating,void 0!==t[s].review&&(a[r].yourReview=t[s].review))}n.setState({results:a})})},n.loadUser=function(){y.findUser(n.props.auth.userId).then(function(e){console.log(e.data),re=e.data.critics,console.log(re),e.data.ratings,n.setState({currentuser:e.data})})},n.handleShow=n.handleShow.bind(Object(V.a)(Object(V.a)(n))),n.handleClose=n.handleClose.bind(Object(V.a)(Object(V.a)(n))),n.state={movieSearch:"",navsearch:"",results:[],rating:0,ratings:[],show:!1,id:"",title:"",poster:"",writeup:"",currentuser:{},userratings:[],usercritics:[]},n}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(e,a,t){this.setState({id:e,title:a,poster:t}),this.setState({show:!0})}},{key:"componentDidMount",value:function(){this.loadUser(),this.runSearch()}},{key:"render",value:function(){var e=this;return r.a.createElement(W,null,r.a.createElement(q,null,this.state.results.map(function(a){return r.a.createElement(I,null,r.a.createElement("div",{className:"search-body",key:a.imdbID},r.a.createElement(N,{size:"md-4"},r.a.createElement("div",{className:"search-float-left"},r.a.createElement(M.a,{to:"/movie/?q="+a.plusTitle},r.a.createElement("img",{src:a.Poster,alt:a.Title})),r.a.createElement(M.a,{to:"/movie/?q="+a.plusTitle},"view movie info"))),r.a.createElement(N,{size:"md-8"},r.a.createElement("div",{className:"search-content"},r.a.createElement("h2",null,a.Title," (",a.Year,")"),r.a.createElement("p",null,a.Plot)),r.a.createElement(I,null,r.a.createElement(N,{size:"md-4"},r.a.createElement("div",{className:"your-rating"},void 0===a.yourRating?r.a.createElement(I,null,r.a.createElement(N,{size:"md-12"},r.a.createElement("div",{className:"star-rating"},r.a.createElement("fieldset",{title:a.Title,image:a.Poster,className:"rating",name:a.imdbID,onClick:e.handleRatingInputChange},r.a.createElement("h3",null,"Please rate:"),r.a.createElement("input",{type:"radio",id:"star4",name:"rating",value:"4"}),r.a.createElement("label",{htmlFor:"4"}),r.a.createElement("input",{type:"radio",id:"star3",name:"rating",value:"3"}),r.a.createElement("label",{htmlFor:"3"}),r.a.createElement("input",{type:"radio",id:"star2",name:"rating",value:"2"}),r.a.createElement("label",{htmlFor:"2"}),r.a.createElement("input",{type:"radio",id:"star1",name:"rating",value:"1"}),r.a.createElement("label",{htmlFor:"1"}))))):1===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):2===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):3===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"})):4===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"})):r.a.createElement("p",null,"Your Rating is not available at this time"),void 0!==a.yourReview?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Review:"),r.a.createElement("br",null),a.yourReview):void 0!==a.yourRating?r.a.createElement(Q.a,{id:a.imdbID,name:a.Title,bsStyle:"primary",bsSize:"large",onClick:function(){return e.handleShow(a.imdbID,a.Title,a.Poster)}},"Add A Review"):r.a.createElement("p",null,"Rate Movie Before Writing Review"))))),r.a.createElement(H.a,{show:e.state.show,onHide:e.handleClose},r.a.createElement(H.a.Header,{closeButton:!0},r.a.createElement(H.a.Title,null,"Review ",e.state.title)),r.a.createElement(H.a.Body,null,r.a.createElement("img",{src:e.state.poster,alt:e.state.title}),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"comment"},"Review:"),r.a.createElement("textarea",{name:"writeup",value:e.state.writeup,onChange:e.handleInputChange,className:"form-control",rows:"5",id:"comment"}))),r.a.createElement(H.a.Footer,null,r.a.createElement(Q.a,{onClick:e.handleReviewSubmit},"Submit Review"),r.a.createElement(Q.a,{onClick:e.handleClose},"Close")))))})))}}]),a}(n.Component),se=(t(425),t(427),function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"sign-in-form"},r.a.createElement(M.a,{to:"/signup"},"Go to sign up"),r.a.createElement("form",{className:"form-signin"},r.a.createElement("h2",{className:"form-signin-heading"},"Please Sign In"),r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",value:e.username,onChange:e.handleChange,name:"username",type:"email",placeholder:"example@email.com"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",name:"password",type:"password",value:e.password,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",name:"/auth/signin",onClick:e.handleSubmit},"Sign In"))))}),ce=(t(429),function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"sign-in-form"},r.a.createElement(M.a,{to:"/"},"Go to sign in"),r.a.createElement("form",{className:"form-signup"},r.a.createElement("h2",{className:"form-signup-heading"},"Sign Up"),r.a.createElement("label",null,"Name"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",value:e.name,onChange:e.handleChange,name:"name",type:"text",placeholder:"your name"}),r.a.createElement("br",null),r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",value:e.username,onChange:e.handleChange,name:"username",type:"email",placeholder:"example@email.com"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",name:"password",type:"password",value:e.password,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",name:"/auth/signup",onClick:e.handleSubmit},"Sign Up"))))}),ie=(t(431),function(e){var a=e.children;return r.a.createElement("div",{className:"jumbotron mt-2"},a)}),me=function(){return r.a.createElement(A,{fluid:!0},r.a.createElement(I,null,r.a.createElement(N,{size:"md-12"},r.a.createElement(ie,null,r.a.createElement("h1",{className:"text-center"},"404 Page Not Found"),r.a.createElement("h1",{className:"text-center"},r.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"))))))},oe=(t(433),function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={currentuser:{},topmovies:[],userratings:[],userimage:""},t.runUserRatings=function(){var e=t.state.currentuser.ratings;e.sort(function(e,a){var t=new Date(e.date);return new Date(a.date)-t}),t.setState({userratings:e})},t.loadUser=function(){var e=window.location.pathname;e=e.split("/")[2],console.log(e),y.findUser(e).then(function(e){t.setState({currentuser:e.data}),t.runUserRatings()})},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(A,null,r.a.createElement(I,null,r.a.createElement(N,{size:"md-3"},r.a.createElement(C,{title:"My Top Movies"},void 0!==this.state.currentuser.topmovies?r.a.createElement("ol",null,this.state.currentuser.topmovies.map(function(e){return r.a.createElement("li",{key:e},e)})):r.a.createElement("p",null,"Add top 5 movies"),r.a.createElement("button",null,"update"))),r.a.createElement(N,{size:"md-6"},r.a.createElement(D,null,this.state.userratings!==[]?r.a.createElement("div",null,this.state.userratings.map(function(a){return r.a.createElement("div",{className:"my-reviews",key:a.imdbID},r.a.createElement(M.a,{to:"/movie/?q="+a.title.split(" ").join("+")},r.a.createElement("img",{alt:a.title,src:a.poster})),r.a.createElement("div",{className:"reviews-title"},r.a.createElement("h3",null,a.title)),r.a.createElement("div",{className:"reviews-body"},r.a.createElement("div",{className:"border-box"},r.a.createElement("p",null,"My rating:"),1===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):2===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"}),r.a.createElement("span",{class:"fa fa-star"})):3===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star"})):4===a.rating?r.a.createElement("p",null,r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"}),r.a.createElement("span",{class:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==a.review?r.a.createElement("p",null,a.review,r.a.createElement("br",null),"-",e.state.currentuser.username):r.a.createElement("p",null))))})):r.a.createElement("div",null,r.a.createElement("p",null,"No Ratings Available")))),r.a.createElement(N,{size:"md-3"},r.a.createElement(C,{title:this.state.currentuser.name+"'s Profile"},r.a.createElement(T.Image,{cloudName:"dmyiazu6p",publicId:this.state.currentuser.image},r.a.createElement(T.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"})))))))}}]),a}(n.Component)),ue=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",password:"",name:"",auth:{userId:"",username:"",name:"",isAuthenticated:!1},survey:!1},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(c.a)({},n,r))},t.handleSubmit=function(e){e.preventDefault();var a={username:t.state.username,password:t.state.password,name:t.state.name,image:"profile-placeholder.png"};t.setState({username:"",password:"",name:""});var n=e.target.name;g.a.post(n,a).then(function(e){if(e.data.isAuthenticated){var a=e.data,n=a.userId,r=a.isAuthenticated,l=a.username,s=a.image,c=a.name;t.setState({auth:{userId:n,isAuthenticated:r,username:l,image:s,name:c}})}})},t.handleLogout=function(e){e.preventDefault(),g.a.get("/auth/logout").then(function(e){t.setState({auth:{userId:"",username:"",isAuthenticated:!1}})})},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){var e=this;g.a.get("/auth/isAuthenticated").then(function(a){var t=a.data,n=t.userId,r=t.isAuthenticated,l=t.username,s=t.image;e.setState({auth:{userId:n,isAuthenticated:r,username:l,image:s}})})}},{key:"render",value:function(){var e=this,a=this.state.auth.isAuthenticated;return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(G,{handleLogout:this.handleLogout}),r.a.createElement(h.a,null,r.a.createElement(E.a,{exact:!0,path:"/",render:function(){return a?r.a.createElement(f.a,{to:"/home"}):r.a.createElement(se,{handleChange:e.handleChange,handleSubmit:e.handleSubmit,email:e.state.email,password:e.state.password})}}),r.a.createElement(E.a,{exact:!0,path:"/signup",render:function(){return a?r.a.createElement(f.a,{to:"/survey"}):r.a.createElement(ce,{handleChange:e.handleChange,handleSubmit:e.handleSubmit,email:e.state.email,password:e.state.password})}}),r.a.createElement(E.a,{exact:!0,path:"/home",render:function(){return a?r.a.createElement(x,{auth:e.state.auth}):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(E.a,{exact:!0,path:"/survey",render:function(){return a?r.a.createElement(Y,{auth:e.state.auth}):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(E.a,{exact:!0,path:"/movie/:id?",render:function(){return a?r.a.createElement($,{auth:e.state.auth}):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(E.a,{exact:!0,path:"/search/:id",render:function(){return a?r.a.createElement(le,{auth:e.state.auth}):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(E.a,{path:"/profile",render:function(){return a?r.a.createElement(ne,{auth:e.state.auth}):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(E.a,{path:"/user/:id",render:function(){return a?r.a.createElement(oe,{auth:e.state.auth}):r.a.createElement(f.a,{to:"/"})}}),r.a.createElement(E.a,{component:me}))))}}]),a}(n.Component);s.a.render(r.a.createElement(ue,null),document.getElementById("root"))}},[[175,2,1]]]);
//# sourceMappingURL=main.ded2e729.chunk.js.map