(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{171:function(e,a){e.exports="data:image/png;base64,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"},175:function(e,a,t){e.exports=t(435)},180:function(e,a,t){},182:function(e,a,t){},202:function(e,a,t){},204:function(e,a,t){},206:function(e,a,t){},208:function(e,a,t){},250:function(e,a,t){},373:function(e,a,t){},375:function(e,a,t){},377:function(e,a,t){},380:function(e,a,t){},382:function(e,a,t){},384:function(e,a,t){},386:function(e,a,t){},388:function(e,a,t){},419:function(e,a,t){},421:function(e,a,t){},423:function(e,a,t){},425:function(e,a,t){},427:function(e,a,t){},429:function(e,a,t){},431:function(e,a,t){},433:function(e,a,t){},435:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(14),s=t.n(l),c=(t(180),t(28)),i=t(15),m=t(16),o=t(18),u=t(17),d=t(19),p=t(442),h=t(443),f=t(438),E=t(441),v=(t(182),t(12)),g=t.n(v),b="https://www.omdbapi.com/",N="&apikey=65d98e81",w={byTitle:function(e){var a=e;return a=(a=a.split(" ")).join("+"),g.a.get(b+"?t="+a+"&y=&plot=short"+N)},byId:function(e){var a=e;return g.a.get(b+"?i="+a+"&y=&plot=short"+N)},searchByTitle:function(e){return g.a.get(b+"?s="+e+"&y&type=movie"+N)},singleByTitle:function(e){return g.a.get(b+"?t="+e+"&y=&plot=short"+N)},postResults:function(e){return g.a.put("/api/user/results/",e)},findUser:function(e){return g.a.get("/api/user/"+e)},findAll:function(){return g.a.get("/api/user/")},submitRating:function(e){return g.a.post("/api/rating",e)},findRatingUser:function(e){return g.a.get("/api/rating/"+e)},getRatings:function(e){return g.a.get("/api/rating/"+e)},addCritic:function(e){return g.a.post("/api/critic",e)},submitReview:function(e){return g.a.put("/api/rating/writeup",e)},uploadImage:function(e){return g.a.put("/api/user",e)},submitTopFive:function(e){return g.a.put("/api/user/topfive",e)}},y=(t(202),function(e){var a=e.size,t=e.children;return r.a.createElement("div",{id:"col",className:a.split(" ").map(function(e){return"col-"+e}).join(" ")},t)}),I=function(e){var a=e.fluid,t=e.children;return r.a.createElement("div",{className:"container".concat(a?"-fluid":"")},t)},A=function(e){var a=e.fluid,t=e.children;return r.a.createElement("div",{className:"row".concat(a?"-fluid":"")},t)},k=(t(204),function(e){return r.a.createElement("div",{className:"sidebar panel"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},r.a.createElement("strong",null,e.title))),r.a.createElement("div",{className:"panel-body"},e.children))}),C=(t(206),t(440)),R=t(436),S=(t(208),function(e){return r.a.createElement(C.a,{bsStyle:"primary",title:e.title},r.a.createElement(R.a,{onClick:e.handleSelection},e.selection))}),D=function(e){return r.a.createElement("div",{className:"mainbody panel"},r.a.createElement("div",{className:"panel-heading"},e.dropdown?r.a.createElement(S,{handleSelection:e.handleSelection,selection:e.selection,title:e.title}):r.a.createElement("h3",{className:"panel-title"},r.a.createElement("strong",null,"My Reviews"))),r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"body-contents"},e.children)))},M=(t(250),t(8)),O=t(437),T=function(e){return r.a.createElement("div",null,void 0!==e.topusers?r.a.createElement("div",{className:"black-border padding-xs"},e.topusers.map(function(a){return r.a.createElement("div",{className:"top-matches",key:a.id},r.a.createElement("fieldset",{onClick:e.addCritic,name:a.user,id:a.id},r.a.createElement("div",null,r.a.createElement("div",{className:"float-left"},r.a.createElement(O.a,{to:"/user/"+a.id},r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:a.image},r.a.createElement(M.Transformation,{width:"100",height:"100",gravity:"faces",crop:"fill"}))),r.a.createElement("p",null,a.user),r.a.createElement("p",null,a.percentage,"% match")),r.a.createElement("div",{className:"content"},void 0!==a.ratings[0]?r.a.createElement("div",{className:"latest-rating"},r.a.createElement("p",{className:"heading"},"Latest Review"),r.a.createElement("p",null,a.ratings[0].title),1===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===a.ratings[0].rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==a.ratings[0].review?r.a.createElement("div",{className:"overflow-scroll height-med"},r.a.createElement("p",null,a.ratings[0].review)):r.a.createElement("p",null,"No written review")):r.a.createElement("p",null,"No ratings for this user"))),r.a.createElement("div",{className:"float-right margin-top-md"},r.a.createElement("button",null,"Add Critic"))),r.a.createElement("hr",null))})):r.a.createElement("div",null,r.a.createElement("p",null,"data not available")))},F=(t(373),function(e){return r.a.createElement("div",null,e.ratings.map(function(e){return r.a.createElement("div",{className:"top-matches my-critics-page",key:e.date},r.a.createElement("div",{className:"my-critics"},r.a.createElement(O.a,{to:"/user/"+e.id},r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:e.image},r.a.createElement(M.Transformation,{width:"100",height:"100",gravity:"faces",crop:"fill"})))),r.a.createElement("div",{className:"mycritic-content"},r.a.createElement("p",null,e.username,"'s review:"),r.a.createElement(O.a,{to:"/movie/?q="+e.imdbID},r.a.createElement("img",{src:e.poster,alt:e.title})),r.a.createElement("h3",null,e.title),r.a.createElement("div",{className:"latest-rating"},r.a.createElement("p",{className:"heading"},"Rating:"),1===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===e.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==e.review?r.a.createElement("p",null,e.review):r.a.createElement("p",null,"No written review"))),r.a.createElement("hr",null))}))}),U=t(171),j=t.n(U),x=[{title:"Halloween",id:"tt1502407",viewers:0,score:0,percentage:0,metacritic:68,reviewed:!1},{title:"The Old Man & the Gun",id:"tt2837574",viewers:0,score:0,percentage:0,metacritic:79,reviewed:!1},{title:"The Hate U Give",id:"tt5580266",viewers:0,score:0,percentage:0,metacritic:82,reviewed:!1}],P=[{title:"Venom",id:"tt1270797",viewers:0,score:0,percentage:35,metacritic:0,reviewed:!1},{title:"A Star Is Born",id:"tt1517451",viewers:0,score:0,percentage:0,metacritic:88,reviewed:!1},{title:"First Man",id:"tt1213641",viewers:0,score:0,percentage:0,metacritic:84,reviewed:!1},{title:"Smallfoot",id:"tt6182908",viewers:0,score:0,percentage:0,metacritic:60,reviewed:!1},{title:"Night School",id:"tt6781982",viewers:0,score:0,percentage:0,metacritic:43,reviewed:!1}],z=[{title:"Black Panther",id:"tt1825683",viewers:0,score:0,percentage:0,metacritic:88,reviewed:!1},{title:"Avengers: Infinity War",id:"tt4154756",viewers:0,score:0,percentage:0,metacritic:68,reviewed:!1},{title:"Crazy Rich Asians",id:"tt3104988",viewers:0,score:0,percentage:0,metacritic:74,reviewed:!1},{title:"Deadpool 2",id:"tt5463162",viewers:0,score:0,percentage:0,metacritic:66,reviewed:!1},{title:"Jurassic World: Fallen Kingdom",id:"tt4881806",viewers:0,score:0,percentage:0,metacritic:51,reviewed:!1}],B=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={currentuser:{},mycritics:[],usercurrentcritics:[],allusers:[],userscores:[],topusers:[],openingmovies:[],topboxoffice:[],popularmovies:[],currentratings:[],allRatings:[],topuserratings:[],button:!1,title:"Top Matches",selection:"My Critics",criticratings:[],dropdown:!0},t.sortCriticRatings=function(e){var a=e;a.sort(function(e,a){return e.date.localeCompare(a.date)}),console.log(a),t.setState({topuserratings:a})},t.getUserCritics=function(e){var a=e,n=[];console.log(a);for(var r=function(e){w.findUser(a[e].criticId).then(function(t){var r=t.data.name,l=t.data.image,s=t.data._id;console.log(t.data),a[e].image=t.data.image,a[e].ratings=t.data.ratings;var c=Math.round(t.data.ratings.length/2);if(n.length<20)for(var i=0;i<c;i++)n.push({image:l,username:r,id:s,imdbID:t.data.ratings[i].imdbID,poster:t.data.ratings[i].poster,rating:t.data.ratings[i].rating,title:t.data.ratings[i].title,date:t.data.ratings[i].date,review:t.data.ratings[i].review})})},l=0;l<a.length;l++)r(l);console.log(a),console.log(n),t.setState({mycritics:a}),t.sortCriticRatings(n)},t.getTopUserRatings=function(){for(var e=t.state.topusers,a=0;a<e.length;a++)if(null!==e[a].ratings)for(var n=e[a].ratings,r=0;r<n.length;r++)for(var l=n[r].imdbID,s=n[r].rating,c=0;c<x.length;c++){if(x[c].id===l){var i=x[c].score,m=x[c].viewers,o=x[c].percentage;x[c].reviewed=!0,s>2?(o=(i+=1)/(m+=1)*100,o=Math.round(o),x[c].score=i,x[c].viewers=m,x[c].percentage=o):(o=i/(m+=1)*100,o=Math.round(o),x[c].score=i,x[c].viewers=m,x[c].percentage=o)}if(!x[c].reviewed){var u=x[c].metacritic;x[c].percentage="*"+u}}for(var d=0;d<e.length;d++)if(null!==e[d].ratings)for(var p=e[d].ratings,h=0;h<p.length;h++)for(var f=p[h].imdbID,E=p[h].rating,v=0;v<P.length;v++){if(P[v].id===f){var g=P[v].score,b=P[v].viewers,N=P[v].percentage;P[v].reviewed=!0,E>2?(N=(g+=1)/(b+=1)*100,N=Math.round(N),P[v].score=g,P[v].viewers=b,P[v].percentage=N):(N=g/(b+=1)*100,N=Math.round(N),P[v].score=g,P[v].viewers=b,P[v].percentage=N)}if(!P[v].reviewed){var w=P[v].metacritic;P[v].percentage="*"+w}}for(var y=0;y<e.length;y++)if(null!==e[y].ratings)for(var I=e[y].ratings,A=0;A<I.length;A++)for(var k=I[A].imdbID,C=I[A].rating,R=0;R<z.length;R++){if(z[R].id===k){var S=z[R].score,D=z[R].viewers,M=z[R].percentage;z[R].reviewed=!0,C>2?(M=(S+=1)/(D+=1)*100,M=Math.round(M),z[R].score=S,z[R].viewers=D,z[R].percentage=M):(M=S/(D+=1)*100,M=Math.round(M),z[R].score=S,z[R].viewers=D,z[R].percentage=M)}if(!z[R].reviewed){var O=z[R].metacritic;z[R].percentage="*"+O}}t.setState({openingmovies:x,topboxoffice:P,popularmovies:z})},t.sortTopUserRatings=function(){for(var e=t.state.userscores,a=0;a<e.length;a++)void 0!==e[a].ratings&&e[a].ratings.sort(function(e,a){var t=new Date(e.date);return new Date(a.date)-t});t.setState({userscores:e}),t.getTopUserRatings()},t.runTopMatchResults=function(){var e,a=t.state.userscores,n=[];a.sort(function(e,a){return a.score-e.score}),console.log(a),e=Math.round(a.length/2),console.log(e);for(var r=0;r<e;r++)n.push(a[r]);console.log(n),t.setState({topusers:n,userscores:a}),t.sortTopUserRatings()},t.runTopMatchFinder=function(){for(var e=t.state.userscores,a=t.state.currentuser.survey,n=0,r=0;r<e.length;r++)for(var l=0,s=e[r],c=0;c<s.survey.length;c++){var i=s.survey.length;a[c]>2&&s.survey[c]>2?(n=(l+=1)/i*100,n=Math.round(n),e[r].score=l,e[r].percentage=n):a[c]<3&&s.survey[c]<3?(n=(l+=1)/i*100,n=Math.round(n),e[r].score=l,e[r].percentage=n):(n=(l+=0)/i*100,n=Math.round(n),e[r].score=l,e[r].percentage=n)}t.setState({userscores:e}),t.runTopMatchResults()},t.runSurveyResults=function(){var e=t.state.allusers,a=[];console.log(e);for(var n=0;n<e.length;n++)e[n]._id!==t.props.auth.userId&&a.push({user:e[n].name,id:e[n]._id,survey:e[n].survey,score:0,percentage:0,ratings:e[n].ratings,image:e[n].image});t.setState({userscores:a}),t.runTopMatchFinder()},t.filterCritics=function(){var e=t.state.usercurrentcritics,a=t.state.allusers.filter(function(a){return e.every(function(e){return e.criticId!==a._id})});a.length>4&&(t.setState({allusers:a}),t.runSurveyResults())},t.runFindAll=function(){w.findAll().then(function(e){console.log(e.data.length),console.log(e.data),e.data.length>4&&(t.setState({allusers:e.data}),t.filterCritics())})},t.loadUser=function(){w.findUser(t.props.auth.userId).then(function(e){var a=e.data.critics;console.log(a),t.getUserCritics(a),t.setState({currentuser:e.data,usercurrentcritics:a})}).then(function(){t.runFindAll()})},t.buttonClick=function(){t.state.button?t.setState({button:!1}):t.setState({button:!0})},t.addCritic=function(e){e.preventDefault();var a=e.currentTarget.id,n=t.props.auth.userId,r=e.currentTarget.name;console.log(a),console.log(n),console.log(r),w.addCritic({username:r,userId:n,criticId:a}).then(function(e){console.log("added!"),t.loadUser()})},t.handleSelection=function(e){e.preventDefault(),"Top Matches"===t.state.title&&t.setState({title:"My Critics",selection:"Top Matches"}),"My Critics"===t.state.title&&t.setState({title:"Top Matches",selection:"My Critics"})},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){return r.a.createElement(I,null,r.a.createElement(A,null,r.a.createElement(y,{size:"md-3"},r.a.createElement(k,{title:"Top Movies"},r.a.createElement("div",{className:"top-movies black-border"},r.a.createElement("h3",null,"Opening This Week"),r.a.createElement("ol",null,this.state.openingmovies.map(function(e){return r.a.createElement(O.a,{key:e.id,to:"/movie/?q="+e.id},r.a.createElement("li",null,e.percentage,"% ",e.title))})),r.a.createElement("h3",null,"Top Box Office"),r.a.createElement("ol",null,this.state.topboxoffice.map(function(e){return r.a.createElement(O.a,{key:e.id,to:"/movie/?q="+e.id},r.a.createElement("li",null,e.percentage,"% ",e.title))})),r.a.createElement("h3",null,"Popular Movies"),r.a.createElement("ol",null,this.state.popularmovies.map(function(e){return r.a.createElement(O.a,{key:e.id,to:"/movie/?q="+e.id},r.a.createElement("li",null,e.percentage,"% ",e.title))})),r.a.createElement("p",{className:"asterisk"},"*Metacritic score")))),r.a.createElement(y,{size:"md-6"},r.a.createElement(D,{selection:this.state.selection,title:this.state.title,handleSelection:this.handleSelection,dropdown:this.state.dropdown},"Top Matches"===this.state.title?this.state.topusers.length>4?r.a.createElement(T,{topusers:this.state.topusers,addCritic:this.addCritic,placeholder:j.a}):r.a.createElement("div",null,r.a.createElement("p",null,"Loading users...")):r.a.createElement(F,{ratings:this.state.topuserratings,critics:this.state.mycritics}))),r.a.createElement(y,{size:"md-3"},r.a.createElement(k,{title:"Welcome, "+this.state.currentuser.name+"!"},r.a.createElement("div",{className:"black-border padding-xs"},r.a.createElement(O.a,{to:"/profile"},r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:this.state.currentuser.image},r.a.createElement(M.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"}))),r.a.createElement("div",{className:"text-center"},r.a.createElement(O.a,{to:"/profile"},"view profile")))))))}}]),a}(n.Component),L=function(e){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"exampleFormControlInput1"},e.children)))},Y=(t(375),t(377),["Pulp Fiction","Fifty Shades of Grey","Lost In Translation","2001: A Space Odyssey","The Witch","Jurassic World","La La Land","Mad Max: Fury Road","Cabin In The Woods","Twilight","Transformers","Interstellar","Gravity","The Tree of Life","Monty Python and the Holy Grail"]),J=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={question:"",number:-1,selectValue:"1",image:"",answers:[],id:"",currentuser:{},redirect:!1,questionNumber:1},t.handleInputChange=function(e){t.setState({selectValue:e.target.value})},t.nextQuestion=function(){var e=t.state.questionNumber;e+=1;var a=t.state.number;w.byTitle(Y[a]).then(function(n){console.log(n.data);var r=n.data.Poster;t.setState({question:Y[a],image:r,id:n.data.imdbID,questionNumber:e})})},t.endQuestions=function(){var e=t.state.answers;console.log(e),w.postResults({id:t.props.auth.userId,survey:e}).then(function(e){t.setState({redirect:!0})})},t.handleFormSubmit=function(e){if(e.preventDefault(),t.state.number<14){var a=t.state.selectValue,n=t.state.answers.map(function(e){return e});n.push(a),t.setState({number:t.state.number+=1,answers:n}),t.nextQuestion()}else t.endQuestions()},t.firstQuestion=function(){w.byTitle("Avatar").then(function(e){var a=e.data.Poster,n=e.data.imdbID;t.setState({question:"Avatar",image:a,id:n})})},t.loadUser=function(){w.findUser(t.props.auth.userId).then(function(e){console.log(e.data),t.setState({currentuser:e.data})}),t.firstQuestion()},t.handleRatingInputChange=function(e){e.preventDefault();var a=e.currentTarget.name,n=e.target.htmlFor,r=e.currentTarget.id,l=e.currentTarget.getAttribute("image"),s=t.props.auth.userId;if(w.submitRating({_userId:s,imdbID:a,rating:n,title:r,poster:l}).then(function(e){return console.log(e.data)}),t.setState({title:a,rating:n}),t.state.number<14){var c=n,i=t.state.answers.map(function(e){return e});i.push(c),t.setState({number:t.state.number+=1,answers:i}),t.nextQuestion()}else t.endQuestions()},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){return this.state.redirect?r.a.createElement(E.a,{to:"/home"}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"survey-questions"},r.a.createElement("div",{className:"question-number"},r.a.createElement("h3",null,"Building your profile..."),r.a.createElement("h3",null,"Question ",this.state.questionNumber," of 16")),r.a.createElement(L,null,r.a.createElement("img",{className:"survey-poster",src:this.state.image,alt:this.state.question}),r.a.createElement("br",null),r.a.createElement("h1",null,this.state.question)),r.a.createElement("div",{className:"star-buttons"},r.a.createElement("fieldset",{className:"rating-survey",image:this.state.image,id:this.state.question,name:this.state.id,onClick:this.handleRatingInputChange},r.a.createElement("h3",null,"Please rate:"),r.a.createElement("input",{type:"radio",id:"star4",name:"rating",value:"4"}),r.a.createElement("label",{htmlFor:"4"}),r.a.createElement("input",{type:"radio",id:"star3",name:"rating",value:"3"}),r.a.createElement("label",{htmlFor:"3"}),r.a.createElement("input",{type:"radio",id:"star2",name:"rating",value:"2"}),r.a.createElement("label",{htmlFor:"2"}),r.a.createElement("input",{type:"radio",id:"star1",name:"rating",value:"1"}),r.a.createElement("label",{htmlFor:"1"})))))}}]),a}(n.Component),q=(t(380),t(444)),G=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={search:""},t.handleInputSubmit=function(e){e.preventDefault();var a=t.state.search;a=(a=a.split(" ")).join("+"),t.props.history.push("/search/"+a)},t.handleInputChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(c.a)({},n,r))},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("a",{className:"navbar-brand",href:"/home"},r.a.createElement("span",{className:"mmrdb-logo"},"MMRDb"))),r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"dropdown"},r.a.createElement("a",{className:"dropdown-toggle","data-toggle":"dropdown",href:"/home"},"Menu",r.a.createElement("span",{className:"caret"})),r.a.createElement("ul",{className:"dropdown-menu"},r.a.createElement("li",null,r.a.createElement(O.a,{to:"/home"},"Home")),r.a.createElement("li",null,r.a.createElement(O.a,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(O.a,{to:"/movie"},"Browse Movies"))))),r.a.createElement("ul",{className:"nav navbar-nav navbar-right"},r.a.createElement("li",null,r.a.createElement("a",{onClick:this.props.handleLogout,href:"/"},r.a.createElement("span",{className:"glyphicon glyphicon-log-out"})," Logout"))),r.a.createElement("form",{className:"navbar-form navbar-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"search",onChange:this.handleInputChange,value:this.state.search,className:"form-control",placeholder:"Search Movie"})),r.a.createElement("button",{type:"submit",onClick:this.handleInputSubmit,className:"btn btn-default"},"Submit"))))}}]),a}(n.Component),V=Object(q.a)(G),W=t(24),Z=(t(382),function(e){return r.a.createElement(I,null,r.a.createElement(A,null,r.a.createElement("div",{className:"movie-display panel",key:e.data.imdbID},r.a.createElement("div",{className:"movie-display-body panel-body"},r.a.createElement(y,{size:"md-4"},"N/A"!==e.data.Poster?r.a.createElement("img",{src:e.data.Poster,alt:e.data.Title}):r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:"movie_placeholder.png"},r.a.createElement(M.Transformation,{width:"200",height:"300",gravity:"faces",crop:"fill"}))),r.a.createElement(y,{size:"md-8"},r.a.createElement("div",{className:"movie-info"},r.a.createElement("h2",null,e.data.Title),r.a.createElement("div",{className:"plot"},e.data.Plot),r.a.createElement("div",{className:"inline"},r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Rated:")," ",e.data.Rated),r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Genre:")," ",e.data.Genre),r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Released:")," ",e.data.Released),r.a.createElement("p",null,r.a.createElement("span",{className:"underline-text"},"Runtime:")," ",e.data.Runtime)),r.a.createElement("p",null,r.a.createElement("span",{className:"your-movie-rating"},"Your Rating: "),1===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===e.data.userRating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("span",null,"No rating yet"),void 0!==e.data.criticRating?r.a.createElement("span",{className:"float-right"},"MyCritic Score: ",e.data.criticRating,"%"):r.a.createElement("span",{className:"float-right"},"MyCritic Score: No ratings")))),r.a.createElement("div",{className:"my-review"},e.children),r.a.createElement("div",{className:"scroll critic-review-body"},r.a.createElement("h3",null,"My Critic Reviews"),e.critics.map(function(e){return r.a.createElement("div",{className:"critic-review-content",key:e.id},r.a.createElement("p",null,e.username),1===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===e.rating?r.a.createElement("span",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):r.a.createElement("p",null,"rating not available"),void 0!==e.review?r.a.createElement("p",null,e.review):r.a.createElement("p",null,"No review submitted"))}))))))}),Q=(t(384),function(e){return r.a.createElement("div",{className:"container"},e.children)}),H=(t(386),function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("br",null),r.a.createElement("div",{className:"panel panel-small"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("h3",{className:"panel-title"},r.a.createElement("strong",null,"Movie Results"))),r.a.createElement("div",{className:"panel-body",id:"well-section"},r.a.createElement("div",{className:"search-results"},e.children)))))}),X=(t(388),t(129)),K=t(439),_=[],$=[],ee=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(o.a)(this,Object(u.a)(a).call(this,e,t))).handleReviewSubmit=function(e){e.preventDefault();var a=n.props.auth.userId;n.state.movie;w.submitReview({_userId:a,review:n.state.writeup,imdbID:n.state.id}).then(function(e){w.findUser(a).then(function(e){for(var a=e.data.ratings,t=n.state.movie,r=0;r<a.length;r++)a[r].imdbID===t.imdbID&&(t.userRating=a[r].rating,t.userReview=a[r].review,void 0!==a[r].review&&(t.userReview=a[r].review));console.log(t),n.setState({show:!1,movie:t})})})},n.handleRatingInputChange=function(e){e.preventDefault();var a=e.currentTarget.name,t=e.target.htmlFor,r=e.currentTarget.getAttribute("image"),l=n.props.auth.userId,s=e.currentTarget.getAttribute("title");w.submitRating({imdbID:a,rating:t,poster:r,_userId:l,title:s}).then(function(e){w.findUser(l).then(function(e){for(var a=e.data.ratings,t=n.state.movie,r=0;r<a.length;r++)a[r].imdbID===t.imdbID&&(t.userRating=a[r].rating,t.userReview=a[r].review,void 0!==a[r].review&&(t.userReview=a[r].review)),console.log(e.data);console.log(t),n.setState({show:!1,movie:t})})})},n.handleInputChange=function(e){e.preventDefault();var a=e.target,t=a.name,r=a.value;n.setState(Object(c.a)({},t,r))},n.getCriticScore=function(){var e=n.state.currentcriticratings,a=n.state.movieholder;console.log(e);var t=0,r=0,l=0;if(e.length>0){for(var s=0;s<e.length;s++)e[s]>2?(l=(t=t+=1)/(r+=1)*100,l=Math.round(l),a.criticRating=l):(l=t/(r+=1)*100,l=Math.round(l),a.criticRating=l);n.setState({movie:a})}},n.getUserRating=function(){var e=n.state.usercritics,a=[],t=n.state.movieholder;console.log(e);for(var r=[],l=0;l<e.length;l++)for(var s=e[l].ratings,c=0;c<s.length;c++)t.imdbID===s[c].imdbID&&(a.push({username:e[l].name,id:e[l]._id,rating:s[c].rating,review:s[c].review}),r.push(s[c].rating));console.log(e),n.setState({currentcriticreviews:a,currentcriticratings:r}),console.log(a),n.getCriticScore()},n.runSingleMovie=function(e){console.log(e),w.byId(e).then(function(e){for(var a=e.data,t=(n.state.currentuser.ratings,n.state.currentuser.ratings),r=0;r<t.length;r++)t[r].imdbID===a.imdbID&&(a.userRating=t[r].rating,a.userReview=t[r].review,void 0!==t[r].review&&(a.userReview=t[r].review));console.log(a),n.setState({movieholder:a,display:!0}),n.getUserRating()})},n.readUrl=function(){var e=window.location.search;e=(e=e.split("="))[1],console.log(e),void 0!==e&&n.runSingleMovie(e)},n.loadUserCritics=function(){var e=n.state.currentuser.critics;if(console.log(e),void 0!==e){for(var a=0;a<e.length;a++)w.findUser(e[a].criticId).then(function(e){console.log(e.data),$.push(e.data)});n.setState({usercritics:$}),n.readUrl()}},n.loadUser=function(){w.findUser(n.props.auth.userId).then(function(e){console.log(e.data),_=e.data.critics,console.log(_),e.data.ratings,n.setState({currentuser:e.data}),n.loadUserCritics()})},n.handleShow=n.handleShow.bind(Object(W.a)(Object(W.a)(n))),n.handleClose=n.handleClose.bind(Object(W.a)(Object(W.a)(n))),n.state={display:!1,movie:null,movieholder:null,currentuser:{},allusers:[],navsearch:"",results:[],rating:0,ratings:[],show:!1,id:"",title:"",poster:"",writeup:"",userratings:[],usercritics:[],currentcriticratings:[],currentcriticreviews:[]},n}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(){this.loadUser()}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(e,a,t){this.setState({id:e,title:a,poster:t}),this.setState({show:!0})}},{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,null===this.state.movie?null:r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(Z,{data:this.state.movie,critics:this.state.currentcriticreviews},void 0===this.state.movie.userRating?r.a.createElement("div",{className:"star-rating"},r.a.createElement("fieldset",{title:this.state.movie.Title,image:this.state.movie.Poster,className:"rating-movie",name:this.state.movie.imdbID,onClick:this.handleRatingInputChange},r.a.createElement("h3",null,"Please rate:"),r.a.createElement("input",{type:"radio",id:"star4",name:"rating",value:"4"}),r.a.createElement("label",{htmlFor:"4"}),r.a.createElement("input",{type:"radio",id:"star3",name:"rating",value:"3"}),r.a.createElement("label",{htmlFor:"3"}),r.a.createElement("input",{type:"radio",id:"star2",name:"rating",value:"2"}),r.a.createElement("label",{htmlFor:"2"}),r.a.createElement("input",{type:"radio",id:"star1",name:"rating",value:"1"}),r.a.createElement("label",{htmlFor:"1"}))):r.a.createElement("span",null),void 0!==this.state.movie.userReview?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Review:"),r.a.createElement("br",null),this.state.movie.userReview):void 0!==this.state.movie.userRating?r.a.createElement(X.a,{id:this.state.movie.imdbID,name:this.state.movie.Title,bsStyle:"primary",bsSize:"large",onClick:function(){return e.handleShow(e.state.movie.imdbID,e.state.movie.Title,e.state.movie.Poster)}},"Add A Review"):r.a.createElement("span",null),r.a.createElement(K.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(K.a.Header,{closeButton:!0},r.a.createElement(K.a.Title,null,"Review ",this.state.title)),r.a.createElement(K.a.Body,null,r.a.createElement("div",{className:"review-window-contents"},r.a.createElement("img",{src:this.state.poster,alt:this.state.title})),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"comment"},"Review:"),r.a.createElement("textarea",{name:"writeup",value:this.state.writeup,onChange:this.handleInputChange,className:"form-control",rows:"5",id:"comment"}))),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{onClick:this.handleReviewSubmit},"Submit Review"),r.a.createElement(X.a,{onClick:this.handleClose},"Close"))))))))}}]),a}(n.Component),ae=t(109),te=t(108),ne=t.n(te),re=(t(419),function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(o.a)(this,Object(u.a)(a).call(this,e))).handleUpload=function(e){e.preventDefault();var a=t.state.userimage,n=t.props.auth.userId;w.uploadImage({image:a,id:n}),t.setState({show:!1}),t.loadUser()},t.handleClose=function(e){e.preventDefault(),t.setState({show:!1})},t.handleShow=function(e){e.preventDefault(),t.setState({show:!0})},t.runUserRatings=function(){var e=t.state.currentuser.ratings;e.sort(function(e,a){var t=new Date(e.date);return new Date(a.date)-t}),t.setState({userratings:e})},t.loadUser=function(){console.log(t.props.auth.userId),w.findUser(t.props.auth.userId).then(function(e){t.setState({currentuser:e.data}),t.runUserRatings()})},t.handleInputChange=function(e){var a=e.target.value,n=e.target.name;t.setState(Object(c.a)({},n,a))},t.handleFormSubmit=function(e){e.preventDefault();var a=[t.state.movieOne,t.state.movieTwo,t.state.movieThree,t.state.movieFour,t.state.movieFive],n={userId:t.props.auth.userId,topfive:a};w.submitTopFive(n).then(function(e){console.log(e.data+" Success!")}),t.setState({showedit:!1}),t.loadUser()},t.handleUpdateMovies=function(e){e.preventDefault(),t.setState({showedit:!0})},t.state={currentuser:{},topmovies:[],userratings:[],uploadedFile:null,uploadedFileCloudinaryUrl:"",userimage:"",modalDisplay:!1,show:!1,showedit:!1,movieOne:"",movieTwo:"",movieThree:"",movieFour:"",movieFive:"",dropdown:!1},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"onImageDrop",value:function(e){this.setState({uploadedFile:e[0]}),this.handleImageUpload(e[0])}},{key:"handleImageUpload",value:function(e){var a=this;ne.a.post("https://api.cloudinary.com/v1_1/dmyiazu6p/image/upload").field("upload_preset","kmmnilon").field("file",e).end(function(e,t){if(e&&console.error(e),""!==t.body.secure_url){var n=t.body.secure_url.split("/")[7];a.setState({userimage:n})}})}},{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I,null,r.a.createElement(A,null,r.a.createElement(y,{size:"md-3"},r.a.createElement(k,{title:"My Fav Five"},r.a.createElement("div",{className:"black-border"},void 0!==this.state.currentuser.topmovies?this.state.showedit?r.a.createElement("div",{className:"text-align-center"},r.a.createElement("p",null,"Add top 5 movies")):r.a.createElement("ol",null,this.state.currentuser.topmovies.map(function(e){return r.a.createElement("li",{key:e},e)}),r.a.createElement("button",{onClick:this.handleUpdateMovies},"update")):r.a.createElement("span",null),!0===this.state.showedit?r.a.createElement("form",null,r.a.createElement("ol",null,r.a.createElement("form",{className:"form"},r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieOne,name:"movieOne",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieTwo,name:"movieTwo",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieThree,name:"movieThree",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieFour,name:"movieFour",onChange:this.handleInputChange,type:"text"})),r.a.createElement("li",null,r.a.createElement("input",{value:this.state.movieFive,name:"movieFive",onChange:this.handleInputChange,type:"text"})),r.a.createElement("button",{onClick:this.handleFormSubmit},"Submit")))):r.a.createElement("span",null)))),r.a.createElement(y,{size:"md-6"},r.a.createElement(D,{dropdown:this.state.dropdown},r.a.createElement("div",{className:"black-border padding-xs"},this.state.userratings!==[]?r.a.createElement("div",null,this.state.userratings.map(function(a){return r.a.createElement("div",{className:"my-reviews",key:a.imdbID},r.a.createElement(O.a,{to:"/movie/?q="+a.imdbID},r.a.createElement("img",{alt:a.title,src:a.poster})),r.a.createElement("div",{className:"reviews-title"},r.a.createElement("h3",null,a.title)),r.a.createElement("div",{className:"reviews-body"},r.a.createElement("div",{className:"border-box"},r.a.createElement("p",null,"My rating:"),1===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==a.review?r.a.createElement("p",null,a.review,r.a.createElement("br",null),"-",e.state.currentuser.name):r.a.createElement("p",null))))})):r.a.createElement("div",null,r.a.createElement("p",null,"No Ratings Available"))))),r.a.createElement(y,{size:"md-3"},r.a.createElement(k,{title:"My Profile"},r.a.createElement("div",{className:"black-border padding-xs"},r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:this.state.currentuser.image},r.a.createElement(M.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"})),r.a.createElement("button",{onClick:this.handleShow},"Update Picture")))))),r.a.createElement(K.a,{show:this.state.show,onHide:this.handClose},r.a.createElement(K.a.Header,{closeButton:!0},r.a.createElement(K.a.Title,null,"Upload New Profile Picture")),r.a.createElement(K.a.Body,null,r.a.createElement("form",null,r.a.createElement("div",{className:"FileUpload"},r.a.createElement("div",{className:"FileUpload-contents"},r.a.createElement(ae.a,{onDrop:this.onImageDrop.bind(this),multiple:!1,accept:".png, .jpg"},r.a.createElement("div",null,"Drop an image or click to select a file to upload."))),r.a.createElement("div",null,r.a.createElement("div",{className:"upload-img"},r.a.createElement("p",null," ",r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:this.state.userimage},r.a.createElement(M.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"})),r.a.createElement("br",null))))))),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{onClick:this.handleUpload},"Save Changes"),r.a.createElement(X.a,{onClick:this.handleClose},"Cancel"))))}}]),a}(n.Component)),le=(t(421),t(423),[]),se=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(o.a)(this,Object(u.a)(a).call(this,e,t))).handleReviewSubmit=function(e){e.preventDefault();var a=n.props.auth.userId;w.submitReview({_userId:a,review:n.state.writeup,imdbID:n.state.id}).then(function(e){w.findUser(a).then(function(e){for(var a=e.data.ratings,t=n.state.results,r=0;r<t.length;r++)for(var l=0;l<a.length;l++)t[r].imdbID===a[l].imdbID&&(t[r].yourRating=a[l].rating,void 0!==a[l].review&&(t[r].yourReview=a[l].review));n.setState({results:t})}),n.setState({show:!1})})},n.handleRatingInputChange=function(e){e.preventDefault();var a=e.currentTarget.name,t=e.target.htmlFor,r=e.currentTarget.getAttribute("image"),l=n.props.auth.userId,s=e.currentTarget.getAttribute("title");w.submitRating({imdbID:a,rating:t,poster:r,_userId:l,title:s}).then(function(e){w.findUser(l).then(function(e){for(var a=e.data.ratings,t=n.state.results,r=0;r<t.length;r++)for(var l=0;l<a.length;l++)t[r].imdbID===a[l].imdbID&&(t[r].yourRating=a[l].rating);n.setState({results:t})})})},n.handleInputChange=function(e){e.preventDefault();var a=e.target,t=a.name,r=a.value;n.setState(Object(c.a)({},t,r))},n.runSearch=function(){var e=window.location.pathname;e=e.split("/")[2],console.log(e);var a=[],t=[];w.searchByTitle(e).then(function(e){if(a=e.data.Search,t=n.state.currentuser.ratings,console.log(a),void 0!==a){n.setState({success:!0});for(var r=0;r<a.length;r++){var l=a[r].Title;l=(l=l.split(" ")).join("+"),a[r].plusTitle=l;for(var s=0;s<t.length;s++)a[r].imdbID===t[s].imdbID&&(a[r].yourRating=t[s].rating,void 0!==t[s].review&&(a[r].yourReview=t[s].review))}n.setState({results:a})}else n.setState({success:!1})})},n.loadUser=function(){w.findUser(n.props.auth.userId).then(function(e){console.log(e.data),le=e.data.critics,console.log(le),e.data.ratings,n.setState({currentuser:e.data}),n.runSearch()})},n.handleShow=n.handleShow.bind(Object(W.a)(Object(W.a)(n))),n.handleClose=n.handleClose.bind(Object(W.a)(Object(W.a)(n))),n.state={movieSearch:"",navsearch:"",results:[],rating:0,ratings:[],show:!1,id:"",title:"",poster:"",writeup:"",currentuser:{},userratings:[],usercritics:[],success:!1},n}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentWillReceiveProps",value:function(){this.loadUser()}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(e,a,t){this.setState({id:e,title:a,poster:t}),this.setState({show:!0})}},{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){var e=this;return r.a.createElement(Q,null,this.state.success?r.a.createElement(H,null,this.state.results.map(function(a){return r.a.createElement(A,{key:a.imdbID},r.a.createElement("div",{className:"search-body"},r.a.createElement(y,{size:"md-4"},r.a.createElement("div",{className:"search-float-left movie-img"},r.a.createElement(O.a,{to:"/movie/?q="+a.imdbID},"N/A"!==a.Poster?r.a.createElement("img",{src:a.Poster,alt:a.Title}):r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:"movie_placeholder.png"},r.a.createElement(M.Transformation,{width:"200",height:"300",gravity:"faces",crop:"fill"}))),r.a.createElement(O.a,{to:"/movie/?q="+a.imdbID},"view movie info"))),r.a.createElement(y,{size:"md-8"},r.a.createElement("div",{className:"search-content"},r.a.createElement("h2",null,a.Title," (",a.Year,")"),r.a.createElement("p",null,a.Plot),r.a.createElement("p",null)),r.a.createElement(A,null,r.a.createElement(y,{size:"md-4"},r.a.createElement("div",{className:"your-rating"},void 0===a.yourRating?r.a.createElement(A,null,r.a.createElement(y,{size:"md-12"},r.a.createElement("div",{className:"star-rating"},r.a.createElement("fieldset",{title:a.Title,image:a.Poster,className:"rating",name:a.imdbID,onClick:e.handleRatingInputChange},r.a.createElement("h3",null,"Please rate:"),r.a.createElement("input",{type:"radio",id:"star4",name:"rating",value:"4"}),r.a.createElement("label",{htmlFor:"4"}),r.a.createElement("input",{type:"radio",id:"star3",name:"rating",value:"3"}),r.a.createElement("label",{htmlFor:"3"}),r.a.createElement("input",{type:"radio",id:"star2",name:"rating",value:"2"}),r.a.createElement("label",{htmlFor:"2"}),r.a.createElement("input",{type:"radio",id:"star1",name:"rating",value:"1"}),r.a.createElement("label",{htmlFor:"1"}))))):1===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===a.yourRating?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Rating:"),r.a.createElement("br",null),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("p",null,"Your Rating is not available at this time"),void 0!==a.yourReview?r.a.createElement("p",null,r.a.createElement("span",{className:"head-text"},"Your Review:"),r.a.createElement("br",null),a.yourReview):void 0!==a.yourRating?r.a.createElement(X.a,{id:a.imdbID,name:a.Title,bsStyle:"primary",bsSize:"large",onClick:function(){return e.handleShow(a.imdbID,a.Title,a.Poster)}},"Add A Review"):r.a.createElement("p",null,"Rate Movie Before Writing Review"))))),r.a.createElement(K.a,{show:e.state.show,onHide:e.handleClose},r.a.createElement(K.a.Header,{closeButton:!0},r.a.createElement(K.a.Title,null,"Review ",e.state.title)),r.a.createElement(K.a.Body,null,r.a.createElement("img",{src:e.state.poster,alt:e.state.title}),r.a.createElement("br",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"comment"},"Review:"),r.a.createElement("textarea",{name:"writeup",value:e.state.writeup,onChange:e.handleInputChange,className:"form-control",rows:"5",id:"comment"}))),r.a.createElement(K.a.Footer,null,r.a.createElement(X.a,{onClick:e.handleReviewSubmit},"Submit Review"),r.a.createElement(X.a,{onClick:e.handleClose},"Close")))))})):r.a.createElement(H,null,r.a.createElement("p",null,"Movie not found (check your spelling)")))}}]),a}(n.Component),ce=(t(425),t(427),function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"sign-in-form"},r.a.createElement(O.a,{to:"/signup"},"Go to sign up"),r.a.createElement("form",{className:"form-signin"},r.a.createElement("h2",{className:"form-signin-heading"},"Please Sign In"),r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",value:e.username,onChange:e.handleChange,name:"username",type:"email",placeholder:"example@email.com"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",name:"password",type:"password",value:e.password,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",name:"/auth/signin",onClick:e.handleSubmit},"Sign In"))))}),ie=(t(429),function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"sign-in-form"},r.a.createElement(O.a,{to:"/"},"Go to sign in"),r.a.createElement("form",{className:"form-signup"},r.a.createElement("h2",{className:"form-signup-heading"},"Sign Up"),r.a.createElement("label",null,"Name"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",value:e.name,onChange:e.handleChange,name:"name",type:"text",placeholder:"your name"}),r.a.createElement("br",null),r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",value:e.username,onChange:e.handleChange,name:"username",type:"email",placeholder:"example@email.com"}),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",name:"password",type:"password",value:e.password,onChange:e.handleChange}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",name:"/auth/signup",onClick:e.handleSubmit},"Sign Up"))))}),me=(t(431),function(e){var a=e.children;return r.a.createElement("div",{className:"jumbotron mt-2"},a)}),oe=function(){return r.a.createElement(I,{fluid:!0},r.a.createElement(A,null,r.a.createElement(y,{size:"md-12"},r.a.createElement(me,null,r.a.createElement("h1",{className:"text-center"},"404 Page Not Found"),r.a.createElement("h1",{className:"text-center"},r.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44"))))))},ue=(t(433),function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={currentuser:{},topmovies:[],userratings:[],userimage:"",dropdown:!1},t.runUserRatings=function(){var e=t.state.currentuser.ratings;e.sort(function(e,a){var t=new Date(e.date);return new Date(a.date)-t}),t.setState({userratings:e})},t.loadUser=function(){var e=window.location.pathname;e=e.split("/")[2],console.log(e),w.findUser(e).then(function(e){t.setState({currentuser:e.data}),t.runUserRatings()})},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(I,null,r.a.createElement(A,null,r.a.createElement(y,{size:"md-3"},r.a.createElement(k,{title:"My Fav Five"},r.a.createElement("div",{className:"black-border padding-xs"},void 0!==this.state.currentuser.topmovies?r.a.createElement("ol",null,this.state.currentuser.topmovies.map(function(e){return r.a.createElement("li",{key:e},e)})):r.a.createElement("p",null,"Not yet added")))),r.a.createElement(y,{size:"md-6"},r.a.createElement(D,{dropdown:this.state.dropdown},r.a.createElement("div",{className:"black-border padding-xs"},this.state.userratings!==[]?r.a.createElement("div",null,this.state.userratings.map(function(a){return r.a.createElement("div",{className:"my-reviews",key:a.imdbID},r.a.createElement(O.a,{to:"/movie/?q="+a.imdbID},r.a.createElement("img",{alt:a.title,src:a.poster})),r.a.createElement("div",{className:"reviews-title"},r.a.createElement("h3",null,a.title)),r.a.createElement("div",{className:"reviews-body"},r.a.createElement("div",{className:"border-box"},r.a.createElement("p",null,"My rating:"),1===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):2===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"}),r.a.createElement("span",{className:"fa fa-star"})):3===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star"})):4===a.rating?r.a.createElement("p",null,r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"}),r.a.createElement("span",{className:"fa fa-star checked"})):r.a.createElement("p",null,"Rating Unavailable"),void 0!==a.review?r.a.createElement("div",{className:"overflow-scroll height-med"},r.a.createElement("p",null,a.review,r.a.createElement("br",null),"-",e.state.currentuser.username)):null)))})):r.a.createElement("div",null,r.a.createElement("p",null,"No Ratings Available"))))),r.a.createElement(y,{size:"md-3"},r.a.createElement(k,{title:this.state.currentuser.name+"'s Profile"},r.a.createElement("div",{className:"black-border padding-xs"},r.a.createElement(M.Image,{cloudName:"dmyiazu6p",publicId:this.state.currentuser.image},r.a.createElement(M.Transformation,{width:"150",height:"150",gravity:"faces",crop:"fill"}))))))))}}]),a}(n.Component)),de=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(o.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={username:"",password:"",name:"",auth:{userId:"",username:"",name:"",isAuthenticated:!1},survey:!1},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value;t.setState(Object(c.a)({},n,r))},t.handleSubmit=function(e){e.preventDefault();var a={username:t.state.username,password:t.state.password,name:t.state.name,image:"profile-placeholder.png"};t.setState({username:"",password:"",name:""});var n=e.target.name;g.a.post(n,a).then(function(e){if(e.data.isAuthenticated){var a=e.data,n=a.userId,r=a.isAuthenticated,l=a.username,s=a.image,c=a.name;t.setState({auth:{userId:n,isAuthenticated:r,username:l,image:s,name:c}})}})},t.handleLogout=function(e){e.preventDefault(),g.a.get("/auth/logout").then(function(e){t.setState({auth:{userId:"",username:"",isAuthenticated:!1}})})},t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){var e=this;g.a.get("/auth/isAuthenticated").then(function(a){var t=a.data,n=t.userId,r=t.isAuthenticated,l=t.username,s=t.image;e.setState({auth:{userId:n,isAuthenticated:r,username:l,image:s}})})}},{key:"render",value:function(){var e=this,a=this.state.auth.isAuthenticated;return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(V,{handleLogout:this.handleLogout}),r.a.createElement(h.a,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return a?r.a.createElement(E.a,{to:"/home"}):r.a.createElement(ce,{handleChange:e.handleChange,handleSubmit:e.handleSubmit,email:e.state.email,password:e.state.password})}}),r.a.createElement(f.a,{exact:!0,path:"/signup",render:function(){return a?r.a.createElement(E.a,{to:"/survey"}):r.a.createElement(ie,{handleChange:e.handleChange,handleSubmit:e.handleSubmit,email:e.state.email,password:e.state.password})}}),r.a.createElement(f.a,{exact:!0,path:"/home",render:function(){return a?r.a.createElement(B,{auth:e.state.auth}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(f.a,{exact:!0,path:"/survey",render:function(){return a?r.a.createElement(J,{auth:e.state.auth}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(f.a,{exact:!0,path:"/movie/:id?",render:function(){return a?r.a.createElement(ee,{auth:e.state.auth}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(f.a,{exact:!0,path:"/search/:id",render:function(){return a?r.a.createElement(se,{auth:e.state.auth}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(f.a,{path:"/profile",render:function(){return a?r.a.createElement(re,{auth:e.state.auth}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(f.a,{path:"/user/:id",render:function(){return a?r.a.createElement(ue,{auth:e.state.auth}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(f.a,{component:oe}))))}}]),a}(n.Component);s.a.render(r.a.createElement(de,null),document.getElementById("root"))}},[[175,2,1]]]);
//# sourceMappingURL=main.f145888a.chunk.js.map